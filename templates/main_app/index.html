{% extends 'main_app/base.html' %}

{% load i18n %}

{% block main_container %}
    
    <section id="home_page_contents" class="section">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-md-8">
                    <div id="articles">
                        
                        {% if not posts %}
                            <h3 class="text-center">{% trans "দুঃখিত, কোন মিম খুঁজে পাওয়া যায় নি" %}
                                <span>
                                    <a href="{% url 'main_app:index' %}">{% trans "মূল পেইজে ফেরত যান" %}</a>
                                </span>
                            </h3>
                        {% endif %}
                        
                        {% for post in posts %}
                            <article class="card mb-3 bg-light">
                                <a href="{{ post.get_absolute_url }}" class="d-block article-link-media">
                                    <img src="{{ post.img.url }}" alt="{{ post.title }}" class="w-100"/>
                                </a>
                                <div class="card-footer mt-3">
                                    <a href="{{ post.get_absolute_url }}" class="d-block article-link-title">
                                        <h4 class="article-title">{{ post.title }}</h4>
                                    </a>
                                    
                                    <p class="article-status">
                                        <a href="#" class="text-secondary"><span>{% trans "২৩৪৪ পছন্দ" %}</span></a>
                                        <span>.</span>
                                        <a href="#" class="text-secondary"><span>{% trans "৭৮৩ টি বক্তব্য" %}</span></a>
                                    </p>
                                    
                                    {% comment %}<ul class="nav article-actions">
                                        <li>
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fa fa-heart"></i>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fa fa-commenting-o"></i>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fa fa-share-square-o"></i>
                                            </button>
                                        </li>
                                    </ul>{% endcomment %}
                                </div>
                            </article>
                        {% endfor %}
                    
                    </div>
                    
                    <div id="pagination">
                        
                        {% if start_end.start %}
                            <a href="?page=1">Start</a>
                        {% endif %}
                        
                        {% for i in page_iter %}
                            {% if i == '...' %}
                                <span class="btn btn-outline-success disabled">{{ i }}</span>
                            {% else %}
                                <a class="btn btn-outline-success {% if i == current_page|add:"0" %}disabled{% endif %}"
                                   href="?page={{ i }}">{{ i }}</a>
                            {% endif %}
                        {% endfor %}
                        
                        
                        {% if start_end.end %}
                            <a href="?page={{ start_end.end }}">End</a>
                        {% endif %}
                    
                    
                    </div>
                </div>
                
                <div class="col-md-3">
                    <aside class="sidebar text-center">
                        <div class="popular-post">
                            <h2>{% trans "জনপ্রিয় মিমগুলো" %}</h2>
                            <ul class="nav row justify-content-md-center">
                                
                                {% for post in posts|slice:":5" %}
                                    {% if post.img %}
                                        <li class="mb-4">
                                            <a href="{{ post.get_absolute_url }}" class="d-block">
                                                <div class="sidebar-img rounded-circle">
                                                    <img
                                                            src="{{ post.img.url }}"
                                                            alt="{{ post.title }}"
                                                            class="{% if post.img.width > post.img.height %}mx-h{% else %}mx-w{% endif %}"
                                                    />
                                                </div>
                                            </a>
                                        </li>
                                    {% endif %}
                                {% endfor %}
                            
                            </ul>
                        </div>
                        
                        <hr>
                        
                        <div class="popular-categories">
                            <h2>{% trans "জনপ্রিয় বিভাগগুলো" %}</h2>
                            
                            {% for cat in categories %}
                                <a
                                        href="{{ cat.get_absolute_url }}"
                                        class="d-inline-block mb-2 border rounded border-secondary category-link"
                                >{{ cat.name }}</a>
                            {% endfor %}
                        
                        </div>
                        
                        <hr>
                        
                        <div class="sidebar-search">
                            <form class="form-inline my-2 my-lg-0">
                                
                                <div class="input-group">
                                    <input
                                            type="search"
                                            class="form-control"
                                            placeholder="{% trans "খুঁজুন" %}"
                                            aria-label="Search"
                                            aria-describedby="sidebar_search">
                                    <button type="submit" class="input-group-addon" id="sidebar_search">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </div>
                            
                            </form>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </section>

{% endblock %}