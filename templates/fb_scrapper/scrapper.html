{% extends 'fb_scrapper/base.html' %}


{% block scrapper_js %}
    
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: '361495860961861',
                appSecret: 'a9255cff275001c025d19f69924eef6e',
                cookie: true,
                xfbml: true,
                version: 'v2.11'
            });

            FB.AppEvents.logPageView();

        };


        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));


        var t;
        function baal() {
            FB.api(
                '/oauth/access_token',
                'GET',
                {
                    "grant_type": "fb_exchange_token",     //static
                    "client_id": "361495860961861",        //app id
                    "client_secret": "a9255cff275001c025d19f69924eef6e",   //app secret key

                    // user token for app
                    "fb_exchange_token": "EAAFIx1BhYkUBAIrC7P5dvQlC1B670aA3cXLqRZADbXx3isHQni66EL6tSda4Xc1E1wbrmZC5DEMnCEd6a7YAfrDzpZA8RMvDC85KmZBAYxcXA33BtwJZA3kZB6ZCPd5XOwpAZBXya9ga3PjggoYFJld9q1ueWOWQ2G4UpaqMMq2GWW97VW2lRtTNnxOrPnqu3GI4aRG1Xk2ZCWqhUI0zQ0aIz"

                },
                function (r) {
                    console.log(r);
                    {% comment %}FB.api(
                        '/oyvai/posts/',
                        'GET',
                        {
                            "fields": "full_picture",
                            "limit": "30",
                            "access_token": r

                        },
                        function (result) {

                            //console.log(response);
                            t = result; //for debugging in console

                            for (var i = 0; i < result.data.length; i++) {
                                //console.log(t.data[i].full_picture)
                                $('#r').append('<img src="' + result.data[i].full_picture + '">')
                            }
                        }
                    );{% endcomment %}
                }
            );

            //  /oauth/access_token?
                // grant_type=fb_exchange_token&
                // client_id=361495860961861&
                // client_secret=a9255cff275001c025d19f69924eef6e&
                // fb_exchange_token=asdasdasdasdad
            
                // if user, use this => access_token=asdasdasddasd


        }


        function getLoginStat() {
            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        }

        function checkLoginState() {
            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        }

        function statusChangeCallback(response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                console.log("Fuck you for logging.. its your fuck:    " + accessToken);
            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook,
                // but has not authenticated your app
                console.log("you're a fuckin BOT or not my type!! ");
            } else {
                // the user isn't logged in to Facebook.
                console.log("shauar pola login kor.... ");
            }
        }
    
    </script>
{% endblock %}


{% block main_container %}
    
    <div id="r"></div>
    
    <button onclick="baal()" type="button" class="btn btn-outline-success" style="cursor: pointer">jdjdjdjdjd</button>
    
    <fb:login-button
            scope="public_profile,email"
            onlogin="checkLoginState();">
    </fb:login-button>

{% endblock %}
